# 5️⃣ 패리티 비트 & 해밍 코드

## **📖 개념**

![image](https://github.com/user-attachments/assets/6d3bd28e-a9f0-45fd-b42c-80970cd974f1)


- 패리티 비트(Parity Bit)의 원리는 무엇이며, 짝수 패리티(Even Parity)와 홀수 패리티(Odd Parity)의 차이점은 무엇인가?
    - 데이터 송수신 시 오류를 검출하기 위한 식별자
    - 전체 전송 데이터(8+1비트)에서, 값이 1인 비트의 개수가 짝수개/홀수개가 되도록 패리티 비트의 값을 결정
        - ???어디선 7+1비트라 하고 어디선 8+1비트라 하고 둘다 맞다는디..? 예전 아스키코는 7+1비트래 나중에 확장된것
    - 송신 호스트와 수신 호스트는 둘중 동일한 한가지 방식을 써야함
- 단순 패리티 검사(Simple Parity Check)로 검출할 수 없는 오류의 유형은 무엇인가?
    - 오류의 발생 여부만 알 수 있다→ 데이터 재송신 요청
    - 오류의 발생 위치는 알 수 없다
    - 짝수개의 오류가 발생하면 검출 불가

![image](https://github.com/user-attachments/assets/10b0e4d7-0d25-44e5-9450-1be71c4a2bec)


**해밍코드 생성법 & 규칙**

- **패리티 비트 수 계산:**
    - 데이터 비트(m)와 패리티 비트(r)의 관계: 2^r ≥ m + r + 1
- **패리티 비트 위치:**
    - 코드워드에서 2^k 위치 (1, 2, 4, 8, …)
- **패리티 비트 설정:**
    - 각 패리티 비트는 해당 위치에 포함되는 비트들의 짝수(또는 홀수) 패리티 검사
    - 예: 위치 1은 1, 3, 5, 7… / 위치 2는 2, 3, 6, 7… 등
- **오류 검출 및 수정:**
    - 수신 후 각 패리티 검사 결과를 이진수로 조합, 오류 비트 위치 산출

**해밍코드 기본 개념**

- **신드롬 (Syndrome):**
    - 패리티 검사 후 나온 결과로, 오류가 발생한 비트의 위치를 이진수로 표시
    - 결과가 0이면 오류 없음
- **해밍 거리:**
    - 두 코드 간 서로 다른 비트 수
    - 최소 해밍 거리에 따라 오류 검출/정정 능력이 결정됨
- **패리티 비트의 2^k 배치 이유:**
    - 위치가 1, 2, 4, 8…인 자리마다 고유한 비트 그룹 검사 가능
    - 각 패리티 비트가 해당 비트들의 XOR 결과로 오류 위치를 쉽게 산출(아래 교집합 다이어그램 참고)
    1 ⊕ 0 = 1, 1 ⊕ 1 = 0
- **패리티 비트 계산 방법:**
    - 각 패리티 비트는 자신이 담당하는 비트(2진수 표현에서 해당 자리수가 1인 위치)의 XOR 결과로 결정됨
- **p1, d3 등의 표기:**
    - 'p'는 패리티 비트, 'd'는 데이터 비트를 의미하며 뒤의 숫자는 위치 번호를 나타냄

![image](https://github.com/user-attachments/assets/e91d9b05-7b96-4efc-8e47-99621c45359d)


![image](https://github.com/user-attachments/assets/02e12787-0007-4395-95a6-2a71e37d633a)


- 해밍 코드(Hamming Code)는 어떤 방식으로 오류를 검출하고 수정하는가?
    - 오류 검출 및 정정(Error Detection & Correction)을 동시에 수행
    - 1비트 오류를 수정할 수 있는 오류정정부호(ECC - Error Correction Code)의 일종이다.
     해밍 코드는 여러 개의 패리티 비트를 이용하여 오류를 검출하고 오류가 발생한 위치까지 확인할 수 있는 방식
    - 데이터 길이 제한이 없다.
    n개의 데이터 비트+k개의 패리티 비트⇒ n+k비트 길이의 code word 생성
    - 해밍 코드는 최소 해밍 거리가 3으로 최대 2개의 오류 검출과 최대 1개의 오류 수정이 가능하다. 그러나 2개의 오류가 발생한 것과 1개의 오류가 발생한 것을 구분할 수 없으며, 2개의 오류가 발생했을 때 데이터가 잘못 복구될 수 있다.
    - 오류검출 예시(위치 특정 예시)
        
         **(오류가 7번 위치일 경우)**
        
        - **패리티 비트 배치:**
            - 1, 2, 4 등 2^k 위치에 배치
        - **각 패리티 비트의 검사 범위:**
            - **p1 (위치 1):** 이진수로 표현 시 LSB(가장오른쪽자리)가 1인 자리 (1, 3, 5, 7, …)
            - **p2 (위치 2):** 두 번째 비트가 1인 자리 (2, 3, 6, 7, …)
            - **p4 (위치 4):** 세 번째 비트가 1인 자리 (4, 5, 6, 7, …)
        - **오류 위치 7 (이진: 111):**
            - 7번은 p1, p2, p4의 검사 대상 → 세 패리티 비트 모두 이상 발생
            - 계산된 신드롬 = 1(p4) 1(p2) 1(p1) = 111₂ = 7
            - → 오류가 7번 위치임을 특정
    
- 해밍 코드에서 Hamming Distance란 무엇이며, 오류 정정 능력과 어떤 관계가 있는가?
    - 해밍거리란? 같은 길이를 가진 두 개의 코드 간  서로 다른 비트수
    - 예: 1010101 vs 1011101 → 거리 1
    - 최소 해밍 거리에 따라 오류 검출/정정 능력이 결정됨
    - 왜 헤밍거리를 설정하는가? (왜 코드간 비트 수를 다르게 해야하나?)
        - 서로 다른 메시지를 인코딩하면서도 최소 해밍 거리를 확보해, 오류 검출 및 정정 성능을 높임
        - 모든 유효한 코드워드가 최소 d (최소 해밍 거리) 이상의 차이를 갖도록 조정
        - 예: 최소 해밍 거리가 3이면, 어떤 두 코드워드라도 최소 3개의 비트가 다름
    - Hamming Code는 최소 해밍 거리를 보통 3으로 설계
        
        최소 해밍 거리 d가 있을 때,
        
        - 최대 (d–1)개의 오류 검출
        - 최대 (d–1)/2개의 오류 정정
        
        즉, d = 3이면 2개 오류 검출, 1개 오류 정정 가능
        
- 해밍 코드에서 사용되는 패리티 비트의 개수는 데이터 비트 길이에 따라 어떻게 결정되는가?
    - 아래를 만족하는 r값을 패리티 비트의 개수로
     2^r ≥ m + r + 1  (데이터 비트(m)와 패리티 비트(r))

## **🔍 심화 및 더 생각해볼 개념**

- 1비트 오류 검출과 수정이 가능한 이유는 무엇이며, 2비트 이상의 오류 검출 및 수정은 어떻게 이루어지는가?
    - 해밍 코드는 각 코드워드에 추가된 패리티 비트를 통해, 한 비트가 잘못되었을 때(예: 1011011 → 1011111) 오류의 위치(신드롬)를 계산할 수 있음
    - 단일 오류의 경우, 신드롬 값이 잘못된 비트 위치를 직접 가리켜 자동 수정 가능
    - 2비트 이상의 오류는 신드롬이 여러 오류를 혼동할 수 있어, 기본 해밍 코드로는 보통 검출만 가능 (수정은 어려움)
- CRC(Cyclic Redundancy Check)와 해밍 코드의 차이점은 무엇인가?
    - 데이터를 다항식으로 보고, 정해진 생성 다항식으로 나눠 나머지를 구함
    - 주로 오류가 발생했는지(오류 검출)에 초점, 정정 기능은 없음
- ECC(Error Correction Code) 메모리가 일반 메모리보다 비싼 이유는 무엇인가?
    - ECC 메모리는 데이터 오류를 검출하고 자동으로 정정할 수 있는 추가 회로와 메모리 비트를 사용하기 때문
- 블록 오류와 랜덤 오류의 차이점은 무엇이며, 각각에 적절한 오류 검출 방법은 무엇인가?
    - **랜덤 오류:**
        - 단일 또는 몇 개의 비트가 불규칙하게 잘못됨
        - 해밍 코드, CRC 등으로 효과적으로 검출 가능
    - **블록 오류:**
        - 연속된 여러 비트가 동시에 오류 발생 (예: 저장 장치의 특정 영역 손상)
        - CRC, Reed-Solomon 코드 등 블록 단위로 오류를 검출하고 복구하는 방법이 적합
- RAID(Redundant Array of Independent Disks)에서 오류 검출 및 정정을 위해 어떤 기술이 사용되는가?
    - RAID는 디스크 여러 개에 데이터를 분산 저장하며, **분산 패리티**를 이용해 오류(디스크 고장)를 복구
    - 예:
        - **RAID 5:** 하나의 디스크 오류 복구
        - **RAID 6:** 두 개의 디스크 오류 복구
    - 일부 RAID 시스템은 추가 ECC 기능을 통해 데이터 무결성을 강화하기도 함
