
## 🚍 입출력 시스템 (I/O System)


### 1️⃣ 주변장치와 채널

- 컴퓨터에는 다양한 주변장치가 연결되며, **전송 속도에 따라** 다음처럼 구분됨:
    - **저속 장치**: 키보드, 마우스, 프린터 등
    - **고속 장치**: SSD, 그래픽카드, 외장 하드 등
- 이러한 장치들은 모두 **버스(Bus)** 라는 통로를 통해 메인보드에 연결됨
- 하지만 하나의 버스에 여러 장치가 동시에 연결되면, **한 장치의 사용이 다른 장치에 영향을 줄 수 있어 병목 현상**이 발생함
- 이를 해결하기 위해 **전송 속도가 비슷한 장치끼리 묶어 ‘채널(Channel)’을 구성**하고, 장치 간 충돌을 줄이며 효율적으로 처리함

🧠 예시:

키보드와 SSD가 같은 통로를 쓰면 SSD의 빠른 속도가 키보드의 느린 처리 때문에 제약을 받을 수 있음 → 서로 분리 필요!

---

### 2️⃣ 입출력 버스 구조

입출력 시스템은 컴퓨터 내부 구조와 밀접하게 연관됨. 특히, 버스와 제어기의 구조가 시스템 효율성에 큰 영향을 준다.

**기존 입출력 버스**
![입출력 버스 기존](https://github.com/user-attachments/assets/9803dc22-7184-42ba-9ba5-23cfe24b6213)

**입출력 제어기 도입 버스**
![입출력 버스](https://github.com/user-attachments/assets/40e0141e-06a8-4c8f-a65d-adfe9c813a34)


---

### 📌 초기 구조 (Polling 방식)

- 초창기 컴퓨터에서는 **모든 입출력 장치가 하나의 버스를 공유**
- CPU가 입출력 장치에 데이터를 요청하고 **직접 결과를 기다리는 방식 (Polling)** 으로 동작
- 장치가 준비될 때까지 CPU가 아무 일도 못하고 기다려야 하므로 **CPU 자원이 낭비됨**

---

### 📌 입출력 제어기를 사용하는 구조

- 장치와 CPU 사이에 **입출력 제어기(I/O Controller)** 를 두어 장치 제어를 위임
- 전체 구조는 **두 개의 버스로 분리**:
    - **메인버스**: CPU와 메모리 등 고속 장치를 위한 버스
    - **입출력 버스**: 키보드, 프린터 등 주변장치를 위한 버스
- 입출력 제어기가 장치의 상태를 관리하고, 필요할 때만 CPU에 알려줌 → **CPU는 효율적으로 처리 가능**

---

### 📌 고속/저속 입출력 버스 분리

- 저속 장치(마우스, 키보드 등)와 고속 장치(SSD, GPU 등)가 같은 입출력 버스를 쓰면 **고속 장치의 전송 속도가 제한**됨
- 이를 해결하기 위해 입출력 버스를 **고속 버스와 저속 버스로 분리**함
- **고속 입출력 버스**: SSD, GPU 등 빠른 장치 연결
    
    **저속 입출력 버스**: 키보드, 마우스 등 느린 장치 연결
    
- **채널 선택기(Channel Selector)** 를 통해 두 버스 간의 데이터 흐름을 제어
- 특히, **그래픽카드처럼 대용량 데이터 전송이 필요한 장치**는 아예 입출력 버스를 사용하지 않고, **메인버스에 직접 연결**하기도 함

---

### 3️⃣ DMA (Direct Memory Access)

- **DMA(직접 메모리 접근)** 는 입출력 장치가 CPU를 거치지 않고 **메모리와 직접 데이터를 주고받을 수 있는 방식**
- 이 작업은 **DMA 제어기(DMAC)** 가 담당하며, 다음과 같은 절차로 진행됨:
    1. CPU가 DMA에게 시작 주소, 데이터 크기, 대상 장치를 지정
    2. 이후 DMA 제어기가 직접 데이터를 메모리에 전송
    3. 전송 완료 후 CPU에 알려줌

🧠 **장점**

- CPU가 입출력 데이터 전송에 관여하지 않으므로 **다른 연산을 동시에 수행할 수 있음**
- 특히 **대용량 데이터 전송** 시, 시스템 성능을 크게 향상시킬 수 있음

---

### 4️⃣ 메모리 맵 입출력 (MMIO)

- DMA 제어기와 CPU가 같은 메모리 공간을 접근하면 **충돌이 발생할 수 있음**
- 이를 해결하기 위해 과거에는 별도의 ‘입출력 메모리’를 사용했지만, 현재는 **메인 메모리 안에서 장치별 공간을 분리**해서 사용함
- 이 방식을 **Memory Mapped I/O (MMIO)** 라고 하며, CPU는 장치 제어를 메모리처럼 접근할 수 있음

🧠 예시:

프린터에 데이터를 보내려면 `0x1000` 번지에 값을 쓰는 식으로 → 프린터를 메모리처럼 다룰 수 있음

---

### ✅ 요약

- 입출력 시스템은 **느린 장치와 빠른 장치 간의 속도 차이를 조정**하고, **CPU의 효율적인 사용**을 목표로 함
- 주요 구성:
    - **채널 분리**: 병목 현상 방지
    - **입출력 제어기**: CPU 부담 감소
    - **DMA**: 대용량 데이터 전송 시 CPU 관여 최소화
    - **MMIO**: 메모리처럼 장치 제어 가능

---
